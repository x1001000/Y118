import RPi.GPIO as GPIO
import time

GPIO.setmode(GPIO.BCM)
GPIO.setwarnings(False)

push = 17 
buzz = 4 

GPIO.setup(push, GPIO.IN)
GPIO.setup(buzz, GPIO.OUT)
p = GPIO.PWM(buzz, 261.63)

freq = {    'C3':  130.81,
            'D3':  146.83,
            'E3':  164.81,
            'F3':  174.61,
            'G3':  196,
            'A3':  220,
            'B3':  246.94,
            'C4':  261.63,
            'C4#': 277.18,
            'D4':  293.66,
            'E4':  329.63,
            'F4':  349.23,
            'G4':  392,
            'A4':  440,
            'B4':  493.88,
            'C5':  523.25,
            'F5#': 739.99,
            'D5':  587.33,
            'E5':  659.26,
            'E5#': 622.25,
            'G5':  783.99,
            'B5':  987.77,
            'A5':  880,
            'F5':  698.46,
            'C6':  1046.5,
            'A6':  1760,
            'D6':  1174.7,
            'E6':  1318.5,
            'F6#': 1480, 
            }

melody = [    [ 'G3','C4','C4','E4','A4','E4','G4','G4','A4','G4','E4','F4','E4','D4'], 
              ['G4','E4','E4','F4','D4','D4','C4','D4','E4','F4','G4','G4','G4','G4','E4','E4','F4','D4','D4','C4','E4','G4','G4','E4','E4','E4','D4','D4','D4','D4','D4','E4','F4','E4','E4','E4','E4','E4','F4','G4','G4','E4','E4','F4','D4','D4','C4','E4','G4','G4','C4'],
              ['C5', 'D5', 'E5', 'D5', 'E5', 'G5', 'D5', 'B4', 'B4', 'C5', 'B4', 'A4', 'B4', 'G4', 'G4', 'A4', 'C5', 'C5', 'D5', 'C5', 'D5', 'D5', 'D5', 'C5', 'D5', 'G5', 'E5', 'C5', 'D5', 'E5', 'D5', 'E5', 'G5', 'B5', 'C6', 'B5', 'A5', 'G5', 'E5', 'G5', 'G5', 'C5', 'D5', 'E5', 'C5', 'C5', 'D5', 'B4', 'G4', 'B4', 'B4', 'B4', 'A4', 'A4', 'C5', 'G5', 'G5', 'G5', 'G5', 'G5', 'F5', 'E5', 'D5', 'D5', 'C5', 'B4', 'C5', 'G4', 'D5', 'C5', 'D5', 'C5', 'D5', 'D5', 'C5', 'D5', 'G5', 'E5', 'D5', 'E5', 'G5', 'G5', 'G5', 'C6', 'B5', 'A5', 'G5', 'A5', 'E5', 'E5', 'D5', 'E5', 'C5', 'D5', 'C5', 'D5', 'C5', 'G5', 'E5', 'E5', 'G5', 'B5', 'C6', 'B5', 'G5', 'E5', 'D5', 'C5', 'D5', 'C5', 'D5', 'G5', 'E5', 'D5', 'C5', 'C5', 'A4', 'C5', 'F5', 'E5', 'D5', 'C5', 'D5', 'C5', 'D5', 'G5', 'E5', 'E5', 'G5', 'B5', 'C6', 'B5', 'G5', 'E5', 'D5', 'C5', 'D5', 'C5', 'D5', 'G5', 'E5', 'D5', 'C5', 'C5', 'A6', 'G5', 'E5', 'G5', 'B5', 'B5', 'B5', 'C6', 'D6', 'B5', 'G5', 'B5', 'B5', 'A5', 'A5'],
            ['G5', 'F5#', 'G5', 'G5', 'D5', 'F5#', 'G5', 'F5#', 'F5#', 'F5#', 'G5', 'A5', 'G5', 'F5#', 'G5', 'D5', 'F5#', 'G5', 'G5', 'F5#', 'G5', 'G5', 'G5', 'G5', 'D5', 'E5', 'E5', 'E5', 'E5', 'F5#', 'G5', 'D5', 'F5#', 'G5', 'E5', 'E5', 'D5', 'D5', 'C5', 'C5', 'B5', 'B5', 'A5', 'E5', 'F5#', 'F5#', 'G5', 'D5', 'F5#', 'A5', 'B5', 'A5', 'A5', 'D6', 'D6', 'D5', 'F5#', 'G5', 'D5', 'F5#', 'A5', 'B5', 'A5', 'A5', 'B5', 'B5', 'B5', 'B5', 'G5', 'G5', 'F5#', 'D6', 'D6', 'C6', 'B5', 'C6', 'B5', 'G5', 'D6', 'D6', 'C6', 'B5', 'C6', 'B5', 'G5', 'B5', 'A5', 'D6', 'C6', 'B5', 'A5', 'C6', 'B5', 'B5', 'B5', 'A5', 'B5', 'F6#', 'D6', 'D6', 'C6', 'B5', 'A5', 'C6', 'B5', 'B5', 'B5', 'A5', 'G5', 'G5', 'F5#', 'G5', 'F5#', 'E5', 'E5', 'E5', 'F5#', 'A5', 'D5', 'F5#', 'G5', 'B5', 'B5', 'C6', 'C6', 'B5', 'C6', 'G5', 'G5', 'B5', 'A5', 'D6', 'C6', 'B5', 'A5', 'C6', 'B5', 'B5', 'B5', 'A5', 'B5', 'F6#', 'D6', 'D6', 'C6', 'B5', 'A5', 'C6', 'B5', 'B5', 'B5', 'A5', 'G5', 'G5', 'F5#', 'G5', 'F5#', 'E5', 'E5', 'E5', 'E5', 'E6', 'E6', 'D6', 'B5', 'B5', 'B5', 'B5', 'C6', 'E5', 'E5', 'C6', 'B5', 'A5', 'A5', 'G5', 'G5', 'F5#', 'G5', 'G5', 'F5#', 'G5', 'E6', 'E6', 'D6', 'G5', 'D6', 'C6', 'B5', 'C6', 'B5', 'A5', 'A5', 'G5', 'A5', 'B5', 'B5', 'A5', 'B5', 'G5', 'F5#', 'G5', 'G5', 'F5#', 'G5', 'E6', 'E6', 'D6', 'G5', 'D6', 'C6', 'B5', 'C6', 'B5', 'A5', 'A5', 'G5', 'A5', 'B5', 'B5', 'A5', 'B5', 'G5', 'F5#', 'G5', 'G5', 'F5#', 'G5', 'E6', 'F6#', 'D6', 'B5', 'B5', 'B5', 'A5', 'A5', 'G5', 'G5', 'F5#', 'G5', 'G5', 'F5#', 'G5', 'E6', 'E6', 'D6', 'D6', 'F6#', 'D6', 'D6', 'B5', 'C6', 'B5', 'A5', 'G5', 'A5', 'B5', 'B5', 'A5', 'B5', 'E5', 'B5', 'G5', 'D5', 'G5', 'G5', 'G5', 'E5', 'G5', 'E5#', 'E6', 'E6', 'E6', 'D6', 'D6', 'C6', 'B5', 'A5', 'C6', 'B5', 'B5', 'B5', 'A5', 'B5', 'F6#', 'D6', 'D6', 'C6', 'B5', 'A5', 'C6', 'B5', 'B5', 'B5', 'A5', 'G5', 'G5', 'F5#', 'G5', 'F5#', 'E5', 'E5', 'E5', 'F5#', 'A5', 'D5', 'F5#', 'G5', 'B5', 'B5', 'C6', 'C6', 'B5', 'C6', 'G5', 'G5', 'D6', 'E6', 'D6', 'D6', 'C6', 'B5', 'A5', 'C6', 'B5', 'B5', 'B5', 'A5', 'B5', 'F6#', 'D6', 'D6', 'C6', 'B5', 'A5', 'C6', 'B5', 'B5', 'B5', 'A5', 'B5', 'E6', 'F6#', 'D6', 'B5', 'D6', 'E6', 'E6', 'E6', 'E6', 'A6', 'F6#', 'F6#', 'G6', 'G6', 'B5', 'B5', 'C6', 'E5', 'E5', 'C6', 'B5', 'A5', 'A5', 'G5', 'G5', 'C6', 'B5', 'A5', 'G5']]

i = 0
t = 0 
note = 0 

while True:
    while GPIO.input(push) == False:
        p.stop()
    while GPIO.input(push) == True:
        if t>20:
            i += 1
            i %= 4#melodies
            note = 0
            t = 0
        else:
            t += 1
        p.start(20)
        p.ChangeFrequency(freq[melody[i][note]])
        time.sleep(0.05)
    
    t = 0
    note += 1
    note %= len(melody[i])

GPIO.clean()
